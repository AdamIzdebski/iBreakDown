<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Natural language description of a DALEX explainer — describe • iBreakDown</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top navbar-mi2" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class = "navbar-mi2logo" href="http://DrWhy.AI/">
        <img src = "https://github.com/ModelOriented/DrWhyTemplate/blob/master/inst/pkgdown/assets/drwhy_znak_violet_small.jpg?raw=true" alt = "MI2" height = 46 title = "MI2">
	  </a>
      <a class="navbar-brand navbar-mi2" href="../index.html">Natural language description of a DALEX explainer</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="navbar-mi2 nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette_iBreakDown_classification.html">iBreakDown plots for classification models</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_description.html">vignette_iBreakDown_description</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_regression.html">iBreakDown plots for regression models</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_titanic.html">iBreakDown plots for Sinking of the RMS Titanic</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Natural language description of a DALEX explainer</h1>
    </div>

    
    <p>Generic function <code>describe</code> generates a natural language description of
<code><a href='break_down.html'>break_down()</a></code> and <code><a href='break_down_uncertainty.html'>shap()</a></code>explanations what enchaces their interpretability.</p>
    

    <pre class="usage"><span class='fu'>describe</span>(<span class='no'>explainer</span>, <span class='kw'>nonsignificance_treshold</span> <span class='kw'>=</span> <span class='fl'>0.15</span>, <span class='no'>...</span>)

<span class='co'># S3 method for break_down</span>
<span class='fu'>describe</span>(<span class='no'>explainer</span>, <span class='kw'>nonsignificance_treshold</span> <span class='kw'>=</span> <span class='fl'>0.15</span>,
  <span class='no'>...</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>short_description</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_values</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_distribution_details</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>display_argumentation</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>display_shap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S3 method for break_down_uncertainty</span>
<span class='fu'>describe</span>(<span class='no'>explainer</span>,
  <span class='kw'>nonsignificance_treshold</span> <span class='kw'>=</span> <span class='fl'>0.15</span>, <span class='no'>...</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>short_description</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>display_values</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>display_distribution_details</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>display_argumentation</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>display_shap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>explainer</th>
      <td><p>a DALEX explainer</p></td>
    </tr>
    <tr>
      <th>nonsignificance_treshold</th>
      <td><p>a parameter specifying a treshold for variable importance</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>a short description describing model's prediction</p></td>
    </tr>
    <tr>
      <th>short_description</th>
      <td><p>allows for generating short description</p></td>
    </tr>
    <tr>
      <th>display_values</th>
      <td><p>allows for displaying variable values</p></td>
    </tr>
    <tr>
      <th>display_numbers</th>
      <td><p>allows for displaying numerical values</p></td>
    </tr>
    <tr>
      <th>display_distribution_details</th>
      <td><p>displays detailed description of predictions distribution</p></td>
    </tr>
    <tr>
      <th>display_argumentation</th>
      <td><p>choosing the type of argumentation to be displayed</p></td>
    </tr>
    <tr>
      <th>display_shap</th>
      <td><p>displays additional information about average contribution. Use only if the explainer is a shap explainer</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A string of natural language description of an explainer</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Function <code>describe.break_down()</code> first selects one of four different description
scenarios. Depending on <code>nonsignificance_treshold</code> which selects variables with
significant contribution to model's final prediction, the scenario can be one of the following:
1. Model's prediction for the selected instance is significantly higher than the average prediction.
2. Model's prediction is significantly lower.
3. Model's prediction is close to it's average prediction, however there are significant
variables counteracting with each other
4. Model's prediction is close to it's average prediction and all the variables are rather nonsignificant.
For each scenario, a template is choosen. Currently only the defalut <code>argumentation_mode</code> can be choosen, which
chooses three most significant variables and dicribes them.</p>
<p>Arguments <code>display_values</code>, which shows values of the variables, and
<code>display_numbers</code>, which allows for displaying numerical values of prediciton changes, controls
the complexity of the generated description. Additional parameter <code>short_description</code> allows for generating short description,
while <code>display_distribution_details</code> displays additional details of the distribution of
model's prediction for all instances, if describing a break_down explanation. Currently only the default
mode of argumentation is supported.</p>
<p>Function <code>describe.break_down_uncertainty()</code> generates a natural language description
for a shap explanation. It imitates the <code>describe.break_down()</code>, the only difference is that contributions
are average contributions of iterated break_down contributions. Argument `display_shap` allows for
average's dispersion description.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='st'>"DALEX"</span>)
<span class='fu'>library</span>(<span class='st'>"randomForest"</span>)
<span class='fu'>library</span>(<span class='st'>"iBreakDown"</span>)

<span class='no'>titanic</span> <span class='kw'>&lt;-</span> <span class='fu'>na.omit</span>(<span class='no'>titanic</span>)
<span class='no'>model_titanic_rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/randomForest/topics/randomForest'>randomForest</a></span>(<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span> ~ <span class='no'>gender</span> + <span class='no'>age</span> + <span class='no'>class</span> + <span class='no'>embarked</span> +
                                  <span class='no'>fare</span> + <span class='no'>sibsp</span> + <span class='no'>parch</span>,  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: The response has five or fewer unique values.  Are you sure you want to do regression?</span></div><div class='input'>
<span class='no'>explain_titanic_rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/DALEX/topics/explain'>explain</a></span>(<span class='no'>model_titanic_rf</span>,
                              <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>[,-<span class='fl'>9</span>],
                              <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>titanic</span>$<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span>,
                              <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"Random Forest v7"</span>)</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  Random Forest v7 
#&gt;   -&gt; data              :  2099  rows  8  cols 
#&gt;   -&gt; target variable   :  2099  values 
#&gt;   -&gt; predict function  :  yhat.randomForest  will be used ([33mdefault[39m)
#&gt;   -&gt; predicted values  :  numerical, min =  0.01091073 , mean =  0.3244014 , max =  0.9931643  
#&gt;   -&gt; residual function :  difference between y and yhat ([33mdefault[39m)
#&gt;   -&gt; residuals         :  numerical, min =  -0.7906522 , mean =  3.883324e-05 , max =  0.9076529  
#&gt; [32mA new explainer has been created![39m</div><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>1234</span>)
<span class='no'>random_passanger</span> <span class='kw'>&lt;-</span> <span class='no'>titanic</span>[<span class='fu'>sample</span>(<span class='fu'>nrow</span>(<span class='no'>titanic</span>),<span class='fl'>1</span>),<span class='fu'>c</span>(<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>6</span>,<span class='fl'>7</span>,<span class='fl'>8</span>)]
<span class='no'>rf_la</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='break_down.html'>break_down</a></span>(<span class='no'>explain_titanic_rf</span>, <span class='no'>random_passanger</span>, <span class='kw'>keep_distributions</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='no'>description</span> <span class='kw'>&lt;-</span> <span class='fu'>describe</span>(<span class='no'>rf_la</span>,
                        <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"the passanger will survive with probability"</span>,
                        <span class='kw'>short_description</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                        <span class='kw'>display_values</span> <span class='kw'>=</span>  <span class='fl'>TRUE</span>,
                        <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                        <span class='kw'>display_distribution_details</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                        <span class='kw'>display_argumentation</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='no'>description</span></div><div class='output co'>#&gt; Random Forest v7 predicts, that the passanger will survive with probability 0.128 which is lower than the average model prediction 0.324.
#&gt;  
#&gt; The most important variable is gender (= male). It decreases the prediction by 0.102. 
#&gt; The second most important variable is class (= 3rd). It decreases the prediction by 0.041. 
#&gt; The third most important variable is fare (= 7.1). It decreases the prediction by 0.026.
#&gt;  
#&gt; Other variables are with less importance. The contribution of all other variables is -0.028 . </div><div class='input'>



<span class='fu'>library</span>(<span class='st'>"DALEX"</span>)
<span class='fu'>library</span>(<span class='st'>"iBreakDown"</span>)
<span class='no'>titanic</span> <span class='kw'>&lt;-</span> <span class='fu'>na.omit</span>(<span class='no'>titanic</span>)
<span class='no'>model_titanic_glm</span> <span class='kw'>&lt;-</span> <span class='fu'>glm</span>(<span class='no'>titanic</span>$<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span> ~ <span class='no'>age</span> + <span class='no'>gender</span> + <span class='no'>class</span> + <span class='no'>fare</span> + <span class='no'>sibsp</span>,
                         <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>[ ,-<span class='fl'>9</span>], <span class='kw'>family</span> <span class='kw'>=</span> <span class='st'>"binomial"</span>)
<span class='no'>explain_titanic_glm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/DALEX/topics/explain'>explain</a></span>(<span class='no'>model_titanic_glm</span>,
                              <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>titanic</span>[,-<span class='fl'>9</span>],
                              <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>titanic</span>$<span class='no'>survived</span> <span class='kw'>==</span> <span class='st'>"yes"</span>,
                              <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"glm"</span>)</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  glm 
#&gt;   -&gt; data              :  2099  rows  8  cols 
#&gt;   -&gt; target variable   :  2099  values 
#&gt;   -&gt; predict function  :  yhat.glm  will be used ([33mdefault[39m)
#&gt;   -&gt; predicted values  :  numerical, min =  0.009479803 , mean =  0.3244402 , max =  0.9742069  
#&gt;   -&gt; residual function :  difference between y and yhat ([33mdefault[39m)
#&gt;   -&gt; residuals         :  numerical, min =  -0.9742069 , mean =  -2.864556e-10 , max =  0.9662286  
#&gt; [32mA new explainer has been created![39m</div><div class='input'><span class='no'>passanger</span> <span class='kw'>&lt;-</span> <span class='no'>titanic</span>[<span class='fu'>sample</span>(<span class='fu'>nrow</span>(<span class='no'>titanic</span>), <span class='fl'>1</span>) ,-<span class='fl'>9</span>]
<span class='no'>shap_glm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='break_down_uncertainty.html'>shap</a></span>(<span class='no'>explain_titanic_glm</span>, <span class='no'>passanger</span>)
<span class='fu'>plot</span>(<span class='no'>shap_glm</span>)</div><div class='img'><img src='describe-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>describe</span>(<span class='no'>shap_glm</span>,
         <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"the selected passanger survives with probability"</span>,
         <span class='kw'>display_shap</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
         <span class='kw'>display_numbers</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Glm predicts, that the selected passanger survives with probability 0.182 which is lower than the average model prediction 0.324.
#&gt;  
#&gt; The most important variable is gender. It decreases the prediction by 0.119. 
#&gt; The second most important variable is class. It decreases the prediction by 0.022. 
#&gt; The third most important variable is age. It decreases the prediction by 0.017. 
#&gt; The average contribution of all the above variable's is significant.
#&gt;  
#&gt; Other variables are with less importance. The contribution of all other variables is 0.015 . </div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Przemyslaw Biecek, Alicja Gosiewska, Hubert Baniecki.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

